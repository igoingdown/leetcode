è¿™æ˜¯ä¸€é“**éå¸¸å…¸å‹çš„â€œæ¸¸æˆæœåŠ¡ç«¯è®¾è®¡ + ç®—æ³• + è¾¹ç•Œæ¡ä»¶â€ç»¼åˆé¢è¯•é¢˜**ï¼Œæ¯”å®ƒè¡¨é¢çœ‹èµ·æ¥éš¾å¾—å¤šã€‚
æˆ‘ä¼šæŒ‰ **é¢˜å¹²æ‹†è§£ â†’ éšå«çº¦æŸ â†’ æ ¸å¿ƒæ¨¡å‹ â†’ å¤šç§æ–¹æ¡ˆ â†’ C++ å®ç°ï¼ˆç”±ç®€åˆ°ä¸¥è°¨ï¼‰** æ¥è®²ï¼Œ**ç«™åœ¨â€œèƒ½è¿›ä¸­å¤§å‚â€çš„æ ‡å‡†**ã€‚

---

# ä¸€ã€é¢˜å¹²è§£æï¼ˆé€å¥æ‹†ï¼‰

## 1ï¸âƒ£ ä¸šåŠ¡ç›®æ ‡

> **æ¸¸æˆé‡Œçš„é‚®ä»¶ä¸€é”®é¢†å–**

* ç©å®¶é‚®ç®±ä¸­æœ‰ **å¤šå°é‚®ä»¶**
* æ¯å°é‚®ä»¶åŒ…å« **è‹¥å¹²å¥–åŠ±**

  * é‡‘å¸
  * çš®è‚¤
  * å®ç®±
* å¸Œæœ›æ”¯æŒä¸€ä¸ªæŒ‰é’®ï¼š**â€œä¸€é”®é¢†å–â€**

---

## 2ï¸âƒ£ é‚®ä»¶ç¤ºä¾‹çš„å…³é”®ä¿¡æ¯

### ç¤ºä¾‹é‚®ä»¶ 1

```
+10 é‡‘å¸
xx çš®è‚¤
xx å®ç®±ï¼ˆå¯èƒ½å†å¼€å‡ºé‡‘å¸ / çš®è‚¤ / å®ç®±ï¼‰
```

ğŸ‘‰ è¯´æ˜ï¼š

* å¥–åŠ± **æ˜¯å¤šç±»å‹**
* å¥–åŠ± **å¯èƒ½é€’å½’ï¼ˆå®ç®±é‡Œè¿˜æœ‰å®ç®±ï¼‰**

---

### ç¤ºä¾‹é‚®ä»¶ 2 / 3

```
xx é‡‘å¸
xx çš®è‚¤
```

ğŸ‘‰ æ™®é€šå¥–åŠ±

---

## 3ï¸âƒ£ æ˜ç¡®ç»™å‡ºçš„çº¦æŸï¼ˆéå¸¸é‡è¦ï¼‰

### çº¦æŸ 1ï¼šèƒŒåŒ…å®¹é‡é™åˆ¶

> **çš®è‚¤æœ‰çš®è‚¤ä¸Šé™**

* è£…ä¸ä¸‹ â†’ é‚®ä»¶ **ä¸èƒ½æ‰“å¼€**
* è¦ **è·³è¿‡å¹¶ä¿ç•™æœªè¯»**

ğŸ‘‰ è¿™ç›´æ¥å¦å®šäº†ï¼š

* â€œå…ˆé¢†ä¸€éƒ¨åˆ†â€
* â€œé¢†å¾—ä¸‹çš„å…ˆé¢†â€

ğŸ‘‰ è¦ä¹ˆ **æ•´å°é‚®ä»¶æˆåŠŸ**
ğŸ‘‰ è¦ä¹ˆ **æ•´å°é‚®ä»¶å¤±è´¥**

è¿™æ˜¯ **äº‹åŠ¡è¯­ä¹‰ï¼ˆTransactionï¼‰**

---

### çº¦æŸ 2ï¼šå®ç®±é‡Œå¯èƒ½è¿˜æœ‰å®ç®±

ğŸ‘‰ å¥–åŠ±æ˜¯ä¸€ä¸ª **é€’å½’ç»“æ„ / æ ‘ / DAG**
ğŸ‘‰ **ä¸èƒ½åªå±•å¼€ä¸€å±‚**

---

# äºŒã€é¢è¯•å®˜çœŸæ­£æƒ³è€ƒä»€ä¹ˆï¼Ÿ

è¿™é¢˜ä¸æ˜¯ UIï¼Œä¹Ÿä¸æ˜¯ for å¾ªç¯ã€‚

**æ ¸å¿ƒè€ƒç‚¹ï¼š**

| ç»´åº¦   | è€ƒä»€ä¹ˆ              |
| ---- | ---------------- |
| æŠ½è±¡èƒ½åŠ› | å¥–åŠ±æ˜¯å¦å»ºæ¨¡ä¸ºæ ‘         |
| äº‹åŠ¡æ€ç»´ | é‚®ä»¶æ˜¯å¦â€œè¦ä¹ˆå…¨æˆåŠŸï¼Œè¦ä¹ˆä¸åŠ¨â€ |
| ç®—æ³•è®¾è®¡ | å¦‚ä½•æ¨¡æ‹Ÿé¢†å–è€Œä¸ç ´åçŠ¶æ€     |
| è¾¹ç•Œå¤„ç† | å®ç®±åµŒå¥—ã€èƒŒåŒ…æ»¡         |
| å·¥ç¨‹æ„è¯† | å¯æ‰©å±•æ€§ã€å¯æµ‹è¯•æ€§        |

---

# ä¸‰ã€æŠ½è±¡æˆè®¡ç®—æœºé—®é¢˜

## 1ï¸âƒ£ æ ¸å¿ƒæ¨¡å‹

### ğŸ¯ ä¸‰ä¸ªæ ¸å¿ƒå¯¹è±¡

```text
Mail
 â””â”€â”€ Rewards[]

Reward
 â”œâ”€â”€ Coin
 â”œâ”€â”€ Skin
 â””â”€â”€ Chest -> Rewards[]
```

### ğŸ’ èƒŒåŒ…çŠ¶æ€

```text
Inventory
- coins
- skins (æœ‰ä¸Šé™)
```

---

## 2ï¸âƒ£ ä¸€é”®é¢†å– = ä»€ä¹ˆï¼Ÿ

> å¯¹é‚®ä»¶åˆ—è¡¨ï¼Œ**æŒ‰é¡ºåº**ï¼š
>
> * å°è¯•é¢†å–
> * å¦‚æœå¤±è´¥ â†’ è·³è¿‡
> * å¦‚æœæˆåŠŸ â†’ æäº¤

ğŸ‘‰ **é¡ºåºå¾ˆé‡è¦**
ğŸ‘‰ å‰é¢çš„æˆåŠŸå¯èƒ½å½±å“åé¢çš„å®¹é‡

---

# å››ã€æ ¸å¿ƒç®—æ³•æ€è·¯ï¼ˆé¢è¯•å¿…è®²ï¼‰

## âœ… æ­£ç¡®æ€è·¯ï¼š**â€œå…ˆæ¨¡æ‹Ÿï¼Œå†æäº¤â€**

### ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥åŠ ï¼Ÿ

å‡è®¾ï¼š

* é‚®ä»¶ A èƒ½è£…ä¸‹
* é‚®ä»¶ B å•ç‹¬èƒ½è£…ä¸‹
* ä½† A + B è£…ä¸ä¸‹

å¦‚æœä½ ç›´æ¥é¢†ï¼š

* A å·²ç»æ”¹äº†èƒŒåŒ…
* B å¤±è´¥ â†’ çŠ¶æ€ä¸ä¸€è‡´

ğŸ‘‰ **å¿…é¡»â€œè¯•è¿è¡Œâ€**

---

### æŠ½è±¡æµç¨‹

```text
for mail in mails:
    simulate rewards expansion
    if inventory_can_hold(simulated_rewards):
        commit
    else:
        skip
```

---

# äº”ã€æ–¹æ¡ˆä¸€ï¼ˆæœ€ç›´è§‚ï¼Œé¢è¯• 80 åˆ†ï¼‰

## æ€è·¯

* DFS å±•å¼€å¥–åŠ±
* ç»Ÿè®¡éœ€è¦çš„é‡‘å¸ã€çš®è‚¤
* åˆ¤æ–­èƒŒåŒ…æ˜¯å¦èƒ½è£…
* å†çœŸæ­£æ·»åŠ 

---

## C++ å®ç°ï¼ˆç®€åŒ–ç‰ˆï¼‰

### æ•°æ®ç»“æ„

```cpp
enum RewardType { COIN, SKIN, CHEST };

struct Reward {
    RewardType type;
    int amount; // coin æ•° / skin æ•°
    vector<Reward> children; // chest å†…å¥–åŠ±
};

struct Mail {
    vector<Reward> rewards;
};

struct Inventory {
    int coins = 0;
    int skins = 0;
    int skinLimit;
};
```

---

### å±•å¼€å¥–åŠ±ï¼ˆDFSï¼‰

```cpp
void collectReward(const Reward& r, int& coinSum, int& skinSum) {
    if (r.type == COIN) {
        coinSum += r.amount;
    } else if (r.type == SKIN) {
        skinSum += r.amount;
    } else { // CHEST
        for (auto& child : r.children) {
            collectReward(child, coinSum, skinSum);
        }
    }
}
```

---

### æ˜¯å¦å¯é¢†å–

```cpp
bool canReceive(const Mail& mail, const Inventory& inv) {
    int coin = 0, skin = 0;
    for (auto& r : mail.rewards) {
        collectReward(r, coin, skin);
    }
    return inv.skins + skin <= inv.skinLimit;
}
```

---

### ä¸€é”®é¢†å–

```cpp
void receiveAll(vector<Mail>& mails, Inventory& inv) {
    for (auto& mail : mails) {
        int coin = 0, skin = 0;
        for (auto& r : mail.rewards) {
            collectReward(r, coin, skin);
        }
        if (inv.skins + skin <= inv.skinLimit) {
            inv.coins += coin;
            inv.skins += skin;
            // æ ‡è®°é‚®ä»¶å·²è¯»
        }
    }
}
```

---

## è¯„ä»·

âœ… æ€è·¯æ­£ç¡®
âŒ æ²¡æœ‰äº‹åŠ¡éš”ç¦»
âŒ æ¯æ¬¡ DFS å¯èƒ½é‡å¤è®¡ç®—

---

# å…­ã€æ–¹æ¡ˆäºŒï¼ˆäº‹åŠ¡æ¨¡æ‹Ÿï¼Œé¢è¯• 90 åˆ†ï¼‰

## æ”¹è¿›ç‚¹

* **ç”¨ä¸´æ—¶ Inventory åšæ¨¡æ‹Ÿ**
* åªæœ‰æˆåŠŸæ‰ commit

---

### æ¨¡æ‹Ÿç‰ˆæœ¬

```cpp
bool tryReceive(const Mail& mail, Inventory invCopy, Inventory& result) {
    int coin = 0, skin = 0;
    for (auto& r : mail.rewards) {
        collectReward(r, coin, skin);
    }

    if (invCopy.skins + skin > invCopy.skinLimit) {
        return false;
    }

    invCopy.coins += coin;
    invCopy.skins += skin;
    result = invCopy;
    return true;
}
```

---

### ä¸€é”®é¢†å–ï¼ˆäº‹åŠ¡è¯­ä¹‰ï¼‰

```cpp
void receiveAll(vector<Mail>& mails, Inventory& inv) {
    for (auto& mail : mails) {
        Inventory next;
        if (tryReceive(mail, inv, next)) {
            inv = next;
        }
    }
}
```

---

## è¯„ä»·

âœ… æœ‰äº‹åŠ¡æ€ç»´
âœ… å¯è¯»æ€§å¥½
âš ï¸ æ·±åº¦åµŒå¥—å®ç®±ä»å¯èƒ½æ€§èƒ½é—®é¢˜

---

# ä¸ƒã€æ–¹æ¡ˆä¸‰ï¼ˆå·¥ç¨‹çº§ï¼Œé¢è¯• 95+ï¼‰

## è®¾è®¡å‡çº§ç‚¹

### 1ï¸âƒ£ å¥–åŠ±ç»Ÿä¸€æˆæµï¼ˆReward Streamï¼‰

```text
Mail -> Reward Tree -> Flatten -> RewardDelta
```

---

### 2ï¸âƒ£ RewardDeltaï¼ˆå·®åˆ†ï¼‰

```cpp
struct RewardDelta {
    int coins = 0;
    int skins = 0;
};
```

---

### 3ï¸âƒ£ å¯ç¼“å­˜ã€å¯å¤ç”¨ã€å¯å›æ»š

---

### C++ ç¤ºä¾‹

```cpp
RewardDelta calcDelta(const Reward& r) {
    RewardDelta d;
    if (r.type == COIN) d.coins += r.amount;
    else if (r.type == SKIN) d.skins += r.amount;
    else {
        for (auto& c : r.children) {
            auto sub = calcDelta(c);
            d.coins += sub.coins;
            d.skins += sub.skins;
        }
    }
    return d;
}
```

---

### æ ¡éªŒ + æäº¤

```cpp
bool canApply(const Inventory& inv, const RewardDelta& d) {
    return inv.skins + d.skins <= inv.skinLimit;
}

void apply(Inventory& inv, const RewardDelta& d) {
    inv.coins += d.coins;
    inv.skins += d.skins;
}
```

---

## ä¼˜ç‚¹

âœ… æ¸…æ™°
âœ… æ˜“æ‰©å±•ï¼ˆä»¥ååŠ é“å…·ã€ç»éªŒï¼‰
âœ… æ˜“æµ‹è¯•
âœ… ç¬¦åˆçœŸå®æ¸¸æˆæœè®¾è®¡

---

# å…«ã€æœ€ä¼˜è§£ç»“è®ºï¼ˆé¢è¯•å®˜è§†è§’ï¼‰

| æ–¹æ¡ˆ          | è¯„ä»·             |
| ----------- | -------------- |
| ç›´æ¥ DFS      | èƒ½ç”¨ï¼Œä½†ååˆçº§        |
| æ¨¡æ‹Ÿäº‹åŠ¡        | **æ¨èæ ‡å‡†ç­”æ¡ˆ**     |
| RewardDelta | **èµ„æ·± / é«˜çº§åŠ åˆ†è§£** |

---

# ä¹ã€å¦‚æœé¢è¯•å®˜ç»§ç»­è¿½é—®ï¼ˆä½ å¯ä»¥è¿™æ ·ç­”ï¼‰

> Qï¼šå¦‚æœå®ç®±æ˜¯æ¦‚ç‡æ‰è½ï¼Ÿ

ğŸ‘‰
â€œé‚£ä¸€é”®é¢†å–åªèƒ½åœ¨ **æœåŠ¡å™¨ä¾§ç¡®å®šç»“æœå** å†åšäº‹åŠ¡åˆ¤æ–­ï¼Œå®¢æˆ·ç«¯åªèƒ½å±•ç¤ºé¢„æœŸã€‚â€

---

> Qï¼šå¦‚æœé‡‘å¸ä¹Ÿæœ‰ä¸Šé™ï¼Ÿ

ğŸ‘‰
â€œRewardDelta æ‰©å±•ä¸€ä¸ªå­—æ®µå³å¯ï¼Œä¸å½±å“ä¸»æµç¨‹ã€‚â€

---

> Qï¼šå¦‚ä½•æ”¯æŒæ’¤å›ï¼Ÿ

ğŸ‘‰
â€œRewardDelta å¤©ç„¶æ”¯æŒåå‘ applyã€‚â€

---

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ä¸‹ä¸€æ­¥å¸®ä½ ï¼š

* æŠŠè¿™é¢˜ **å‡çº§æˆâ€œçœŸå®æ‰‹æ¸¸æœåŠ¡ç«¯æ¶æ„è®¾è®¡â€**
* æˆ–æ¨¡æ‹Ÿ **å­—èŠ‚ / è…¾è®¯ / ç±³å“ˆæ¸¸é¢è¯•å®˜è¿½é—®**
* æˆ–ç»™ä½  **ä¸€ä»½æ ‡å‡†é¢è¯•ç­”é¢˜ç¨¿**

ä½ æƒ³ç»§ç»­å“ªä¸€ä¸ªï¼Ÿ

